[
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_clearingHouse",
                "type": "address"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "constructor"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "price",
                "type": "uint256"
            },
            {
                "internalType": "uint256",
                "name": "openNotional",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "size",
                "type": "int256"
            },
            {
                "internalType": "int256",
                "name": "margin",
                "type": "int256"
            }
        ],
        "name": "_getPositionMetadata",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "notionalPos",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "uPnl",
                "type": "int256"
            },
            {
                "internalType": "int256",
                "name": "marginFraction",
                "type": "int256"
            }
        ],
        "stateMutability": "pure",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_oracle",
                "type": "address"
            }
        ],
        "name": "changeOracle",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "clearingHouse",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "cumulativePremiumFraction",
        "outputs": [
            {
                "internalType": "int256",
                "name": "",
                "type": "int256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "fundingBufferPeriod",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "fundingPeriod",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "trader",
                "type": "address"
            }
        ],
        "name": "getNotionalPositionAndUnrealizedPnl",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "notionalPosition",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "unrealizedPnl",
                "type": "int256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "int256",
                "name": "positionSize",
                "type": "int256"
            },
            {
                "internalType": "uint256",
                "name": "openNotional",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "unrealizedPnl",
                "type": "int256"
            },
            {
                "internalType": "int256",
                "name": "baseAssetQuantity",
                "type": "int256"
            }
        ],
        "name": "getOpenNotionalWhileReducingPosition",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "remainOpenNotional",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "realizedPnl",
                "type": "int256"
            }
        ],
        "stateMutability": "pure",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "trader",
                "type": "address"
            },
            {
                "internalType": "int256",
                "name": "margin",
                "type": "int256"
            },
            {
                "internalType": "enum IClearingHouse.Mode",
                "name": "mode",
                "type": "uint8"
            }
        ],
        "name": "getOptimalPnl",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "notionalPosition",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "unrealizedPnl",
                "type": "int256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "trader",
                "type": "address"
            }
        ],
        "name": "getPendingFundingPayment",
        "outputs": [
            {
                "internalType": "int256",
                "name": "takerFundingPayment",
                "type": "int256"
            },
            {
                "internalType": "int256",
                "name": "latestCumulativePremiumFraction",
                "type": "int256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "getSnapshotLen",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_intervalInSeconds",
                "type": "uint256"
            }
        ],
        "name": "getTwapPrice",
        "outputs": [
            {
                "internalType": "int256",
                "name": "",
                "type": "int256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "getUnderlyingPrice",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_intervalInSeconds",
                "type": "uint256"
            }
        ],
        "name": "getUnderlyingTwapPrice",
        "outputs": [
            {
                "internalType": "int256",
                "name": "",
                "type": "int256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "governance",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "string",
                "name": "_name",
                "type": "string"
            },
            {
                "internalType": "address",
                "name": "_underlyingAsset",
                "type": "address"
            },
            {
                "internalType": "address",
                "name": "_oracle",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "_minSizeRequirement",
                "type": "uint256"
            },
            {
                "internalType": "address",
                "name": "_governance",
                "type": "address"
            }
        ],
        "name": "initialize",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "lastPrice",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "trader",
                "type": "address"
            },
            {
                "internalType": "uint256",
                "name": "price",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "fillAmount",
                "type": "int256"
            }
        ],
        "name": "liquidatePosition",
        "outputs": [
            {
                "internalType": "int256",
                "name": "realizedPnl",
                "type": "int256"
            },
            {
                "internalType": "uint256",
                "name": "quoteAsset",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "size",
                "type": "int256"
            },
            {
                "internalType": "uint256",
                "name": "openNotional",
                "type": "uint256"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "longOpenInterestNotional",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "maxFundingRate",
        "outputs": [
            {
                "internalType": "int256",
                "name": "",
                "type": "int256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "maxLiquidationPriceSpread",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "maxLiquidationRatio",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "maxOracleSpreadRatio",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "minSizeRequirement",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "name",
        "outputs": [
            {
                "internalType": "string",
                "name": "",
                "type": "string"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "nextFundingTime",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "openInterestNotional",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "components": [
                    {
                        "internalType": "uint256",
                        "name": "ammIndex",
                        "type": "uint256"
                    },
                    {
                        "internalType": "address",
                        "name": "trader",
                        "type": "address"
                    },
                    {
                        "internalType": "int256",
                        "name": "baseAssetQuantity",
                        "type": "int256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "price",
                        "type": "uint256"
                    },
                    {
                        "internalType": "uint256",
                        "name": "salt",
                        "type": "uint256"
                    },
                    {
                        "internalType": "bool",
                        "name": "reduceOnly",
                        "type": "bool"
                    }
                ],
                "internalType": "struct IOrderBook.Order",
                "name": "order",
                "type": "tuple"
            },
            {
                "internalType": "int256",
                "name": "fillAmount",
                "type": "int256"
            },
            {
                "internalType": "uint256",
                "name": "fulfillPrice",
                "type": "uint256"
            }
        ],
        "name": "openPosition",
        "outputs": [
            {
                "internalType": "int256",
                "name": "realizedPnl",
                "type": "int256"
            },
            {
                "internalType": "bool",
                "name": "isPositionIncreased",
                "type": "bool"
            },
            {
                "internalType": "int256",
                "name": "size",
                "type": "int256"
            },
            {
                "internalType": "uint256",
                "name": "openNotional",
                "type": "uint256"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "oracle",
        "outputs": [
            {
                "internalType": "contract IOracle",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "name": "positions",
        "outputs": [
            {
                "internalType": "int256",
                "name": "size",
                "type": "int256"
            },
            {
                "internalType": "uint256",
                "name": "openNotional",
                "type": "uint256"
            },
            {
                "internalType": "int256",
                "name": "lastPremiumFraction",
                "type": "int256"
            },
            {
                "internalType": "uint256",
                "name": "liquidationThreshold",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "name": "reserveSnapshots",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "lastPrice",
                "type": "uint256"
            },
            {
                "internalType": "uint256",
                "name": "timestamp",
                "type": "uint256"
            },
            {
                "internalType": "uint256",
                "name": "blockNumber",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_fundingBufferPeriod",
                "type": "uint256"
            }
        ],
        "name": "setFundingBufferPeriod",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "_governance",
                "type": "address"
            }
        ],
        "name": "setGovernace",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_maxLiquidationRatio",
                "type": "uint256"
            },
            {
                "internalType": "uint256",
                "name": "_maxLiquidationPriceSpread",
                "type": "uint256"
            }
        ],
        "name": "setLiquidationParams",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "int256",
                "name": "_maxFundingRate",
                "type": "int256"
            }
        ],
        "name": "setMaxFundingRate",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_minSizeRequirement",
                "type": "uint256"
            }
        ],
        "name": "setMinSizeRequirement",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "uint256",
                "name": "_maxOracleSpreadRatio",
                "type": "uint256"
            },
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "name": "setPriceSpreadParams",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "settleFunding",
        "outputs": [
            {
                "internalType": "int256",
                "name": "premiumFraction",
                "type": "int256"
            },
            {
                "internalType": "int256",
                "name": "underlyingPrice",
                "type": "int256"
            },
            {
                "internalType": "int256",
                "name": "",
                "type": "int256"
            },
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "shortOpenInterestNotional",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "spotPriceTwapInterval",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "startFunding",
        "outputs": [
            {
                "internalType": "uint256",
                "name": "",
                "type": "uint256"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    },
    {
        "inputs": [],
        "name": "underlyingAsset",
        "outputs": [
            {
                "internalType": "address",
                "name": "",
                "type": "address"
            }
        ],
        "stateMutability": "view",
        "type": "function"
    },
    {
        "inputs": [
            {
                "internalType": "address",
                "name": "trader",
                "type": "address"
            }
        ],
        "name": "updatePosition",
        "outputs": [
            {
                "internalType": "int256",
                "name": "fundingPayment",
                "type": "int256"
            },
            {
                "internalType": "int256",
                "name": "latestCumulativePremiumFraction",
                "type": "int256"
            }
        ],
        "stateMutability": "nonpayable",
        "type": "function"
    }
]